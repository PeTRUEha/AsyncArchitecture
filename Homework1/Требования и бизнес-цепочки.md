# ДЗ 1.

## Разбить каждое требование на составляющие

Таск-трекер должен быть отдельным дашбордом и доступен всем сотрудникам компании
- Актор: авторизоавнный пользователь
- Команда: покажи текущие задачи
- Данные: текущие задачи
- Событие: задачи показаны пользователю

Авторизация в таск-трекере должна выполняться через общий сервис авторизации
- Актор: пользователь, пытающийся войти в систему
- Команда: Авторизуй пользователя (дай ему токен)
- Данные: Креденшиалы пользователя
- Событие: пользователь авторизован

Новые таски может создавать кто угодно
- Актор:  залогиненный пользователь
- Команда: Создай таску
- Данные: описание, статус, исполнитель
- Событие: создана новая задача

Менеджеры и администраторы должны иметь кнопку «Заассайнить задачи»
- Актор: пользователь, нажавший на кнопку
- Команда: выполнить назначение задач
- Данные: токен с данными пользователя для авторизации
- Событие: задачи назначены / Доступ запрещён

Каждый сотрудник должен иметь возможность видеть в отдельном месте список заассайненных на него задач + отметить задачу выполненной
- Актор: сотрудник
- Команда: отметить задачу выполненной
- Данные: задача
- Событие: задача выполнена

Аккаунтинг должен быть в отдельном дашборде и доступным только для администраторов и бухгалтеров
- Актор: сотрудник
- Команда: показать статистику заработка
- Данные: информация о пользователе, финансовые данные о задачах
- Событие: статистика показана пользователю / доступ запрещён

у обычных попугов доступ к аккаунтингу тоже должен быть. Но только к информации о собственных счетах (аудит лог + текущий баланс)
- Актор: сотрудник
- Команда: покажи финансовую статистику пользователя
- Данные: аудит лог + текущий баланс пользователя
- Событие: статистика показана пользователю

Авторизация в дешборде аккаунтинга должна выполняться через общий сервис аутентификации
- Актор: пользователь, пытающийся войти в систему
- Команда: Авторизуй пользователя (дай ему токен)
- Данные: Креденшиалы пользователя
- Событие: пользователь авторизован

У каждого из сотрудников должен быть свой счёт, который показывает, сколько за сегодня он получил денег.
У счёта должен быть аудитлог того, за что были списаны или начислены деньги, с подробным описанием каждой из задач.
- Актор: сотрудник
- Команда: Верни лог денежных транзакций
- Данные: Все денежные транцакции, затрагивающие данного пользователя
- Событие: Лог показан пользователю

Цены на задачу определяется единоразово, в момент появления в системе (можно с минимальной задержкой)
- Актор: таск-трекер
- Команда: назначь цены за задачу
- Данные: задача, цены за назначение и выполнение
- Событие: назначены цены за задачу

Деньги списываются сразу после ассайна на сотрудника
- Актор: таск-трекер
- Команда: спиши деньги за ассайн задачи
- Данные: задача, сумма
- Событие: добавлена транзакция со списанием денег

а начисляются после выполнения задачи
- Актор: таск-трекер
- Команда: начисли деньги за выполнение задачи
- Данные: задача, сумма
- Событие: добавлена транзакция с зачислением денег

отрицательный баланс переносится на следующий день. Единственный способ его
погасить - закрыть достаточное количество задач в течение дня
- Актор: часы
- Команда: запиши отрицательный баланс
- Данные: транзакции, баланс
- Событие: отрицательный баланс сохранён

Дешборд должен выводить количество заработанных топ-менеджментом за сегодня денег.
- Актор: администратор или бухгалтер
- Команда: выведи сумму всех транзакций за день
- Данные: транзакции за последний день, их сумма
- Событие: выведены данных

В конце дня необходимо:
a) считать сколько денег сотрудник получил за рабочий день
- Актор: часы
- Команда: посчитай зарплату за день, обнули текущий баланс если он больше 0
- Данные: транзакции за день, отрицательный баланс предыдущего дня
- Событие: Посчитана заплата сотрудника

b) отправлять на почту сумму выплаты.
- Актор: сервис аккаунтинга
- Команда: отправь на почту сумму за день
- Данные: сумма за день
- Событие: письмо отправлено

После выплаты баланса (в конце дня) он должен обнуляться, и в аудитлоге всех операций аккаунтинга
должно быть отображено, что была выплачена сумма.
- Актор: сервис аккаунтинга
- Команда: добавь запись о начислении
- Данные: баланс за текущий день
- Событие: деньги начислены

Аналитика — это отдельный дашборд, доступный только админам. Нужно указывать, сколько заработал топ-менеджмент
за сегодня и сколько попугов ушло в минус. Нужно показывать самую дорогую задачу за день, неделю или месяц.
- Актор: пользователь с правами админа
- Команда: покажи аналитику
- Данные: задачи, заработок топ-менеджмента, балансы попугов
- Событие: аналитика показана

## Определить, как все бизнес цепочки будут выглядеть и на какие шаги они будут разбиваться.

## Бизнес-цепочки:

### Аутентификация
- Регистрация
- Аутентификация
- Выход из системы

### Жизненный цикл задачки
- Создаётся новая задачка
- Назначенная задачка приводит к списанию денег со счёта разработчика
- Нажимается кнопка "Назначить задачи", задачи назначаются
- Назначенная задачка приводит к списанию денег со счёта разработчика
- Разработчик задачи переводит её в статус выполнено
- Выполненная задачка приводит к начислению денег на счёт разработчика

### Действия по завершении дня
- Перенос отрицательного баланса на следующий день
- Обнуление положительного баланса и отправка чека на почту

### Показ статистики
- Вывод информации о задачках
- Вывод финансовой информации для попугов
- Вывод финансовой информации для начальства

